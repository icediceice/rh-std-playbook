#!/bin/bash
# Zabbix agent restart script
# Generated by Ansible AIX Management playbook

# Stop Zabbix agent
killall zabbix_agentd 2>/dev/null

# Wait for process to stop
sleep 2

# Start Zabbix agent
/usr/local/zabbix/sbin/zabbix_agentd -c /usr/local/zabbix/etc/zabbix_agentd.conf

# Verify startup
sleep 3
if pgrep zabbix_agentd >/dev/null; then
    echo "Zabbix agent restarted successfully"
    exit 0
else
    echo "Failed to restart Zabbix agent"
    exit 1
fi